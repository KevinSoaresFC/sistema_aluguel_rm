<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Imobiliaria R.M</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>  
    <div class="main_card">
        <hr>          
        <h1> IMOBILIARIA <span>R.M</span>üè†</h1>
        <br>
        <h2 class="subtitulo">Or√ßamento de Aluguel</h2>

        <form id="meuForm">
            <div class="input_group">
                <label>Tipo do Im√≥vel</label>
                <select id="tipo" onchange="gerenciarCampos()">
                    <option value="apartamento">Apartamento: R$ 700,00</option>
                    <option value="casa">Casa: R$ 900,00</option>
                    <option value="estudio">Est√∫dio: R$ 1200,00</option>
                </select>
            </div>

            <div class="input_group" id="grupo_quartos">
                <label>Quantidade de Quartos</label>
                <select id="quartos">
                    <option value="1">1 Quarto</option>
                    <option value="2">2 Quartos</option>
                </select>
            </div>

            <div class="input_group">
                <label>Vagas de Garagem</label>
                <input type="number" id="vagas" value="0">
            </div>

            <div class="input_group escondido" id="grupo_criancas">
                <label>Possui Crian√ßas? (Apenas Apartamento)</label>
                <select id="criancas">
                    <option value="s">Sim</option>
                    <option value="n">N√£o (Desconto de 5%)</option>
                </select>
            </div>

            <div class="input_group">
                <label>Parcelar Contrato (R$ 2.000 at√© 5x)</label>
                <select id="parcelas">
                    <option value="1">1x (√Ä vista)</option>
                    <option value="2">2x </option>
                    <option value="3">3x </option>
                    <option value="4">4x </option>
                    <option value="5">5x </option>
                </select>
            </div>
            <br>

            <button type="button" class="botao_calcula" onclick="calcular()">Calcular</button>
        </form>

        <div class="caixa_resultado">
            <h3>Resumo do Or√ßamento</h3>
            <div id="conteudo_dinamico">
                <p>Aluguel mensal: <strong id="res_aluguel">R$ 0.00</strong></p>
                <p>Contrato: R$ 2.000,00</p>
                <p>Parcelamento: <strong id="res_parcela">0x de R$ 0.00</strong></p>
            </div>
        </div>
    </div>

    <script>
        function gerenciarCampos() {
            const tipo = document.getElementById('tipo').value;
            const grupoCriancas = document.getElementById('grupo_criancas');
            const grupoQuartos = document.getElementById('grupo_quartos');

            if (tipo === 'apartamento') {
                grupoCriancas.classList.remove('escondido');
            } else {
                grupoCriancas.classList.add('escondido');
                document.getElementById('criancas').value = 's'; 
            }

            if (tipo === 'estudio') {
                grupoQuartos.classList.add('escondido');
            } else {
                grupoQuartos.classList.remove('escondido');
            }
        }

        window.onload = gerenciarCampos;

        function calcular() {
            const tipo = document.getElementById('tipo').value;
            const quartos = parseInt(document.getElementById('quartos').value);
            const vagas = parseInt(document.getElementById('vagas').value);
            const criancas = document.getElementById('criancas').value;
            const parcelas = parseInt(document.getElementById('parcelas').value);
            const display = document.getElementById('conteudo_dinamico');
            
            let aluguel = 0;
            let erros = [];

            if (tipo === "estudio" && (vagas < 0 || vagas > 4)) {
                erros.push("ERRO: Est√∫dio permite apenas de 0 a 4 vagas.");
            }
            if ((tipo === "casa" || tipo === "apartamento") && vagas > 1) {
                erros.push(`ERRO: ${tipo.toUpperCase()} aceita no m√°ximo 1 vaga.`);
            }

            if (erros.length > 0) {
                display.innerHTML = `<div class="mensagem_erro">${erros.join("<br>")}</div>`;
                return;
            }

            if (tipo === "apartamento") {
                aluguel = 700;
                if (quartos === 2) aluguel += 200;
                if (vagas > 0) aluguel += 300;
                if (criancas === "n") aluguel *= 0.95; 
            } 
            else if (tipo === "casa") {
                aluguel = 900;
                if (quartos === 2) aluguel += 250;
                if (vagas > 0) aluguel += 300;
            } 
            else if (tipo === "estudio") {
                aluguel = 1200;
                if (vagas >= 1 && vagas <= 2) {
                    aluguel += 250;
                } else if (vagas > 2) {
                    let vagasExtras = vagas - 2;
                    aluguel += 250 + (vagasExtras * 60);
                }
            }

            const valorContrato = 2000;
            const valorParcela = valorContrato / parcelas;

            display.innerHTML = `
                <p>Aluguel mensal: <strong>R$ ${aluguel.toFixed(2)}</strong></p>
                <p>Contrato: R$ ${valorContrato.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</p>
                <p>Parcelamento: <strong>${parcelas}x de R$ ${valorParcela.toFixed(2)}</strong></p>
            `;
        }
    </script>

</body>

</html>